{"ast":null,"code":"var _jsxFileName = \"/Users/aesashi/Desktop/Study/Poject/drf_api/frontend/sns-react/src/components/Login.js\",\n  _s = $RefreshSig$();\nimport React, { useReducer } from \"react\";\nimport { withCookies } from \"react-cookie\";\nimport axios from \"axios\";\nimport Avatar from \"@material-ui/core/Avatar\";\nimport Button from \"@material-ui/core/Button\";\nimport TextField from \"@material-ui/core/TextField\";\nimport LockOutlinedIcon from \"@material-ui/icons/LockOutlined\";\nimport Typography from \"@material-ui/core/Typography\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Container from \"@material-ui/core/Container\";\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\nimport { START_FETCH, FETCH_SUCCESS, ERROR_CATCHED, INPUT_EDIT, INPUT_EDIT_LOG, INPUT_EDIT_REG, TOGGLE_MODE } from \"./actionTypes\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst useStyles = makeStyles(theme => ({\n  paper: {\n    marginTop: theme.spacing(8),\n    display: \"flex\",\n    flexDirection: \"column\",\n    alignItems: \"center\"\n  },\n  avatar: {\n    margin: theme.spacing(1),\n    backgroundColor: theme.palette.secondary.main\n  },\n  form: {\n    width: \"100%\",\n    // Fix IE 11 issue.\n    marginTop: theme.spacing(1)\n  },\n  submit: {\n    margin: theme.spacing(3, 0, 2)\n  },\n  span: {\n    display: \"flex\",\n    flexDirection: \"column\",\n    alignItems: \"center\",\n    color: \"teal\"\n  },\n  spanError: {\n    display: \"flex\",\n    flexDirection: \"column\",\n    alignItems: \"center\",\n    color: \"fuchsia\",\n    marginTop: 10\n  }\n}));\nconst initialState = {\n  isLoading: false,\n  isLoginView: true,\n  error: '',\n  credencialsLog: {\n    username: '',\n    password: ''\n  },\n  credentialsReg: {\n    email: '',\n    password: ''\n  }\n};\nconst loginReducer = (state, action) => {\n  switch (action.type) {\n    case START_FETCH:\n      {\n        return {\n          ...state,\n          isLoading: true\n        };\n      }\n    case FETCH_SUCCESS:\n      {\n        return {\n          ...state,\n          isLoading: false\n        };\n      }\n    case ERROR_CATCHED:\n      {\n        return {\n          ...state,\n          error: 'Email or passeor is not correct!',\n          isLoading: false\n        };\n      }\n    case INPUT_EDIT:\n      {\n        return {\n          ...state,\n          [action.inputName]: action.payload,\n          error: ''\n        };\n      }\n    case TOGGLE_MODE:\n      {\n        return {\n          ...state,\n          isLoginView: !state.isLoginView\n        };\n      }\n    default:\n      return false;\n  }\n};\nconst Login = () => {\n  _s();\n  const classes = useStyles();\n  const [state, dispatch] = useReducer(loginReducer, initialState);\n  const inputChangedLog = () => event => {\n    const cred = state.credencialsLog;\n    cred[event.target.name] = event.target.value;\n    dispatch({\n      type: INPUT_EDIT,\n      inputName: 'state.credentialsLog',\n      pauload: cred\n    });\n  };\n  const inputChangedReg = () => event => {\n    const cred = state.credentialsReg;\n    cred[event.target.name] = event.target.value;\n    dispatch({\n      type: INPUT_EDIT,\n      inputName: 'state.credentialsReg',\n      pauload: cred\n    });\n  };\n  const login = async event => {\n    event.preventDefault();\n    if (state.isLoginView) {\n      try {\n        dispatch({\n          type: START_FETCH\n        });\n        const res = await axios.post(\"http://127.0.0.1:8000/authen/\", state.credentialsLog, {\n          headers: {\n            \"Content-Type\": \"application/json\"\n          }\n        });\n        props.cookies.set(\"current-token\", res.data.token);\n        res.data.token ? window.location.href = \"/profiles\" : window.location.href = \"/\";\n        dispatch({\n          type: FETCH_SUCCESS\n        });\n      } catch {\n        dispatch({\n          type: ERROR_CATCHED\n        });\n      }\n    } else {\n      try {\n        dispatch({\n          type: START_FETCH\n        });\n        await axios.post(\"http://127.0.0.1:8000/api/user/create/\", state.credentialsReg, {\n          headers: {\n            \"Content-Type\": \"application/json\"\n          }\n        });\n        dispatch({\n          type: FETCH_SUCCESS\n        });\n        dispatch({\n          type: TOGGLE_MODE\n        });\n      } catch {\n        dispatch({\n          type: ERROR_CATCHED\n        });\n      }\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 174,\n    columnNumber: 5\n  }, this);\n};\n_s(Login, \"6GIWCI0qRXnBuTPj/J1Vi65cn8I=\", false, function () {\n  return [useStyles];\n});\n_c = Login;\nexport default Login;\nvar _c;\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"names":["React","useReducer","withCookies","axios","Avatar","Button","TextField","LockOutlinedIcon","Typography","makeStyles","Container","CircularProgress","START_FETCH","FETCH_SUCCESS","ERROR_CATCHED","INPUT_EDIT","INPUT_EDIT_LOG","INPUT_EDIT_REG","TOGGLE_MODE","useStyles","theme","paper","marginTop","spacing","display","flexDirection","alignItems","avatar","margin","backgroundColor","palette","secondary","main","form","width","submit","span","color","spanError","initialState","isLoading","isLoginView","error","credencialsLog","username","password","credentialsReg","email","loginReducer","state","action","type","inputName","payload","Login","classes","dispatch","inputChangedLog","event","cred","target","name","value","pauload","inputChangedReg","login","preventDefault","res","post","credentialsLog","headers","props","cookies","set","data","token","window","location","href"],"sources":["/Users/aesashi/Desktop/Study/Poject/drf_api/frontend/sns-react/src/components/Login.js"],"sourcesContent":["import React, { useReducer } from \"react\";\nimport { withCookies } from \"react-cookie\";\nimport axios from \"axios\";\nimport Avatar from \"@material-ui/core/Avatar\";\nimport Button from \"@material-ui/core/Button\";\nimport TextField from \"@material-ui/core/TextField\";\nimport LockOutlinedIcon from \"@material-ui/icons/LockOutlined\";\nimport Typography from \"@material-ui/core/Typography\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Container from \"@material-ui/core/Container\";\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\n\nimport {\n    START_FETCH,\n    FETCH_SUCCESS,\n    ERROR_CATCHED,\n    INPUT_EDIT,\n    INPUT_EDIT_LOG,\n    INPUT_EDIT_REG,\n    TOGGLE_MODE,\n  } from \"./actionTypes\";\n\n  const useStyles = makeStyles((theme) => ({\n    paper: {\n      marginTop: theme.spacing(8),\n      display: \"flex\",\n      flexDirection: \"column\",\n      alignItems: \"center\",\n    },\n    avatar: {\n      margin: theme.spacing(1),\n      backgroundColor: theme.palette.secondary.main,\n    },\n    form: {\n      width: \"100%\", // Fix IE 11 issue.\n      marginTop: theme.spacing(1),\n    },\n    submit: {\n      margin: theme.spacing(3, 0, 2),\n    },\n    span: {\n      display: \"flex\",\n      flexDirection: \"column\",\n      alignItems: \"center\",\n      color: \"teal\",\n    },\n    spanError: {\n      display: \"flex\",\n      flexDirection: \"column\",\n      alignItems: \"center\",\n      color: \"fuchsia\",\n      marginTop: 10,\n    },\n  }));\n\nconst initialState = {\n    isLoading: false, \n    isLoginView: true,\n    error: '',\n    credencialsLog: {\n        username: '',\n        password: '',\n    },\n    credentialsReg: {\n        email: '',\n        password: ''\n    }\n}\n\nconst loginReducer = (state, action) => {\n    switch(action.type){\n        case START_FETCH: {\n            return{\n                ...state,\n                isLoading: true,\n            }\n        }\n        case FETCH_SUCCESS: {\n            return{\n                ...state, \n                isLoading: false,\n            }\n        }\n        case ERROR_CATCHED: {\n            return{\n                ...state,\n                error: 'Email or passeor is not correct!',\n                isLoading:false\n            }\n        }\n        case INPUT_EDIT: {\n            return {\n                ...state,\n                [action.inputName]: action.payload, \n                error: '',\n            }\n        }\n        case TOGGLE_MODE: {\n            return{\n                ...state,\n                isLoginView: !state.isLoginView,\n\n            }\n        }\n        default:\n            return false\n    }\n}\n\nconst Login = () => {\n    const classes = useStyles();\n    const [state, dispatch] = useReducer(loginReducer, initialState)\n\n    const inputChangedLog=() => event => {\n        const cred = state.credencialsLog;\n        cred[event.target.name] = event.target.value;\n        dispatch({\n            type: INPUT_EDIT,\n            inputName: 'state.credentialsLog',\n            pauload: cred,\n        })\n    } \n\n    const inputChangedReg=() => event => {\n        const cred = state.credentialsReg;\n        cred[event.target.name] = event.target.value;\n        dispatch({\n            type: INPUT_EDIT,\n            inputName: 'state.credentialsReg',\n            pauload: cred,\n        })\n    } \n\n\n    const login = async (event) => {\n        event.preventDefault();\n        if (state.isLoginView) {\n          try {\n            dispatch({ type: START_FETCH });\n            const res = await axios.post(\n              \"http://127.0.0.1:8000/authen/\",\n              state.credentialsLog,\n              {\n                headers: { \"Content-Type\": \"application/json\" },\n              }\n            );\n            props.cookies.set(\"current-token\", res.data.token);\n            res.data.token\n              ? (window.location.href = \"/profiles\")\n              : (window.location.href = \"/\");\n            dispatch({ type: FETCH_SUCCESS });\n          } catch {\n            dispatch({ type: ERROR_CATCHED });\n          }\n        } else {\n          try {\n            dispatch({ type: START_FETCH });\n            await axios.post(\n              \"http://127.0.0.1:8000/api/user/create/\",\n              state.credentialsReg,\n              {\n                headers: { \"Content-Type\": \"application/json\" },\n              }\n            );\n            dispatch({ type: FETCH_SUCCESS });\n            dispatch({ type: TOGGLE_MODE });\n          } catch {\n            dispatch({ type: ERROR_CATCHED });\n          }\n        }\n      };\n\n  return (\n    <div>\n      \n    </div>\n  )\n}\n\nexport default Login\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}